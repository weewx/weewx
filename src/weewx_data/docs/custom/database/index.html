
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Tom Keffer <tkeffer@gmail.com>">
      
      
        <link rel="canonical" href="https://www.weewx.com/custom/database/">
      
      
        <link rel="prev" href="../localization/">
      
      
        <link rel="next" href="../units/">
      
      <link rel="icon" href="../../images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.14">
    
    
      
        <title>Customizing the database - WeeWX 5.0</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.85bb2934.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.a6bdf11c.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans:300,300i,400,400i,700,700i%7CInconsolata+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Noto Sans";--md-code-font:"Inconsolata Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/weewx_ui.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="white">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#customizing-the-database" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="WeeWX 5.0" class="md-header__button md-logo" aria-label="WeeWX 5.0" data-md-component="logo">
      
  <img src="../../images/logo-weewx.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            WeeWX 5.0
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Customizing the database
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="white"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="WeeWX 5.0" class="md-nav__button md-logo" aria-label="WeeWX 5.0" data-md-component="logo">
      
  <img src="../../images/logo-weewx.png" alt="logo">

    </a>
    WeeWX 5.0
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Quick start
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Quick start
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../quickstarts/debian/" class="md-nav__link">
        Debian
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../quickstarts/redhat/" class="md-nav__link">
        RedHat
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../quickstarts/suse/" class="md-nav__link">
        SuSE
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../quickstarts/pip/" class="md-nav__link">
        pip
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../quickstarts/git/" class="md-nav__link">
        git
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          User's guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          User's guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usersguide/introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usersguide/installing/" class="md-nav__link">
        Installing WeeWX
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usersguide/where/" class="md-nav__link">
        Where to find things
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usersguide/running/" class="md-nav__link">
        Running WeeWX
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usersguide/webserver/" class="md-nav__link">
        Web server integration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usersguide/backup/" class="md-nav__link">
        Backup & restore
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usersguide/mysql-mariadb/" class="md-nav__link">
        MySQL/MariaDB
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
          Troubleshooting
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_8">
          <span class="md-nav__icon md-icon"></span>
          Troubleshooting
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usersguide/troubleshooting/what-to-do/" class="md-nav__link">
        What to do
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usersguide/troubleshooting/hardware/" class="md-nav__link">
        Hardware problems
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usersguide/troubleshooting/software/" class="md-nav__link">
        Software problems
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usersguide/troubleshooting/meteo/" class="md-nav__link">
        Meteorological problems
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Customization guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Customization guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../custom-reports/" class="md-nav__link">
        Customizing reports
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../report-scheduling/" class="md-nav__link">
        Scheduling reports
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cheetah-generator/" class="md-nav__link">
        The Cheetah generator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../image-generator/" class="md-nav__link">
        The Image generator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../localization/" class="md-nav__link">
        Localization
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Customizing the database
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Customizing the database
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#specifying-a-schema-for-a-new-database" class="md-nav__link">
    Specifying a schema for a new database
  </a>
  
    <nav class="md-nav" aria-label="Specifying a schema for a new database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#picking-a-starting-schema" class="md-nav__link">
    Picking a starting schema
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modify-starting-schema" class="md-nav__link">
    Modifying a starting schema
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modify-the-schema-of-an-existing-database" class="md-nav__link">
    Modify the schema of an existing database
  </a>
  
    <nav class="md-nav" aria-label="Modify the schema of an existing database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modify-the-database-in-situ" class="md-nav__link">
    Modify the database in situ
  </a>
  
    <nav class="md-nav" aria-label="Modify the database in situ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-archive-type" class="md-nav__link">
    Adding a type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove-archive-type" class="md-nav__link">
    Removing a type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rename-archive-type" class="md-nav__link">
    Renaming a type
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reconfigure-using-new-schema" class="md-nav__link">
    Reconfigure database using a new schema
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#change-unit-system" class="md-nav__link">
    Changing the unit system in an existing database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rebuilding-the-daily-summaries" class="md-nav__link">
    Rebuilding the daily summaries
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../units/" class="md-nav__link">
        Customizing units
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../multiple-bindings/" class="md-nav__link">
        Multiple data bindings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sle/" class="md-nav__link">
        Search lists
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../service-engine/" class="md-nav__link">
        Services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../derived/" class="md-nav__link">
        Derived types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../drivers/" class="md-nav__link">
        Drivers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../extensions/" class="md-nav__link">
        Extensions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Utilities guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Utilities guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/weewxd/" class="md-nav__link">
        weewxd
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
          weectl
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          weectl
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/weectl-about/" class="md-nav__link">
        weectl
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/weectl-database/" class="md-nav__link">
        weectl database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/weectl-debug/" class="md-nav__link">
        weectl debug
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/weectl-device/" class="md-nav__link">
        weectl device
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/weectl-extension/" class="md-nav__link">
        weectl extension
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/weectl-station/" class="md-nav__link">
        weectl station
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/wee_import/" class="md-nav__link">
        wee_import
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/wee_reports/" class="md-nav__link">
        wee_reports
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Hardware guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Hardware guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/drivers/" class="md-nav__link">
        Drivers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/acurite/" class="md-nav__link">
        AcuRite
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/cc3000/" class="md-nav__link">
        CC3000
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/fousb/" class="md-nav__link">
        FineOffset
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/te923/" class="md-nav__link">
        TE923
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/ultimeter/" class="md-nav__link">
        Ultimeter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/vantage/" class="md-nav__link">
        Vantage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/wmr100/" class="md-nav__link">
        WMR100
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/wmr300/" class="md-nav__link">
        WMR300
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/wmr9x8/" class="md-nav__link">
        WMR9x8
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/ws1/" class="md-nav__link">
        WS1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/ws23xx/" class="md-nav__link">
        WS23xx
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hardware/ws28xx/" class="md-nav__link">
        WS28xx
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../upgrade/" class="md-nav__link">
        Upgrade guide
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_1" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8_1" id="__nav_8_1_label" tabindex="0">
          Application options
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_1">
          <span class="md-nav__icon md-icon"></span>
          Application options
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/weewx-options/introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/weewx-options/general/" class="md-nav__link">
        General options
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/weewx-options/stations/" class="md-nav__link">
        [Station]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/weewx-options/stdrestful/" class="md-nav__link">
        [StdRESTful]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/weewx-options/stdreport/" class="md-nav__link">
        [StdReport]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/weewx-options/stdconvert/" class="md-nav__link">
        [StdConvert]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/weewx-options/stdcalibrate/" class="md-nav__link">
        [StdCalibrate]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/weewx-options/stdqc/" class="md-nav__link">
        [StdQC]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/weewx-options/stdwxcalculate/" class="md-nav__link">
        [StdWXCalculate]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/weewx-options/stdarchive/" class="md-nav__link">
        [StdArchive]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/weewx-options/stdtimesynch/" class="md-nav__link">
        [StdTimeSynch]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/weewx-options/data-bindings/" class="md-nav__link">
        [DataBindings]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/weewx-options/databases/" class="md-nav__link">
        [Databases]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/weewx-options/database-types/" class="md-nav__link">
        [DatabaseTypes]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/weewx-options/engine/" class="md-nav__link">
        [Engine]
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_2" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8_2" id="__nav_8_2_label" tabindex="0">
          Skin options
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8_2">
          <span class="md-nav__icon md-icon"></span>
          Skin options
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/skin-options/introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/skin-options/extras/" class="md-nav__link">
        [Extras]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/skin-options/labels/" class="md-nav__link">
        [Labels]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/skin-options/almanac/" class="md-nav__link">
        [Almanac]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/skin-options/units/" class="md-nav__link">
        [Units]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/skin-options/texts/" class="md-nav__link">
        [Texts]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/skin-options/cheetahgenerator/" class="md-nav__link">
        [CheetahGenerator]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/skin-options/imagegenerator/" class="md-nav__link">
        [ImageGenerator]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/skin-options/copygenerator/" class="md-nav__link">
        [CopyGenerator]
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/skin-options/generators/" class="md-nav__link">
        [Generators]
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/aggtypes/" class="md-nav__link">
        Aggregation types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/durations/" class="md-nav__link">
        Durations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/units/" class="md-nav__link">
        Units
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/valuetuple/" class="md-nav__link">
        ValueTuple
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/valuehelper/" class="md-nav__link">
        ValueHelper
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../devnotes/" class="md-nav__link">
        Notes for developers
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../changes/" class="md-nav__link">
        Change log
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#specifying-a-schema-for-a-new-database" class="md-nav__link">
    Specifying a schema for a new database
  </a>
  
    <nav class="md-nav" aria-label="Specifying a schema for a new database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#picking-a-starting-schema" class="md-nav__link">
    Picking a starting schema
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modify-starting-schema" class="md-nav__link">
    Modifying a starting schema
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modify-the-schema-of-an-existing-database" class="md-nav__link">
    Modify the schema of an existing database
  </a>
  
    <nav class="md-nav" aria-label="Modify the schema of an existing database">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#modify-the-database-in-situ" class="md-nav__link">
    Modify the database in situ
  </a>
  
    <nav class="md-nav" aria-label="Modify the database in situ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#add-archive-type" class="md-nav__link">
    Adding a type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove-archive-type" class="md-nav__link">
    Removing a type
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rename-archive-type" class="md-nav__link">
    Renaming a type
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reconfigure-using-new-schema" class="md-nav__link">
    Reconfigure database using a new schema
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#change-unit-system" class="md-nav__link">
    Changing the unit system in an existing database
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rebuilding-the-daily-summaries" class="md-nav__link">
    Rebuilding the daily summaries
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="customizing-the-database">Customizing the database<a class="headerlink" href="#customizing-the-database" title="Permanent link">&para;</a></h1>
<p>For most users the database defaults will work just fine. However, there
may be occasions when you may want to add a new observation type to your
database, or change its unit system. This section shows you how to do
this.</p>
<p>Every relational database depends on a <em>schema</em> to specify which types
to include in the database. When a WeeWX database is first created, it
uses a Python version of the schema to initialize the database. However,
once the database has been created, the schema is read directly from the
database and the Python version is not used again &mdash; any changes to it
will have no effect. This means that the strategy for modifying the
schema depends on whether the database already exists.</p>
<h2 id="specifying-a-schema-for-a-new-database">Specifying a schema for a new database<a class="headerlink" href="#specifying-a-schema-for-a-new-database" title="Permanent link">&para;</a></h2>
<p>If the database does not exist yet, then you will want to pick an
appropriate starting schema. If it's not exactly what you want, you can
modify it to fit your needs before creating the database.</p>
<h3 id="picking-a-starting-schema">Picking a starting schema<a class="headerlink" href="#picking-a-starting-schema" title="Permanent link">&para;</a></h3>
<p>WeeWX gives you a choice of three different schemas to choose from when
creating a new database:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Number of<br/>observation types</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>schemas.wview.schema</code></td>
<td>49</td>
<td>The original schema that came with wview.</td>
</tr>
<tr>
<td><code>schemas.wview_extended.schema</code></td>
<td>111</td>
<td>A version of the wview schema,<br/>which has been extended with<br/>many new types.<br/>This is the default version.</td>
</tr>
<tr>
<td><code>schemas.wview_small.schema</code></td>
<td>20</td>
<td>A minimalist version of the wview schema.</td>
</tr>
</tbody>
</table>
<p>For most users, the default database schema,
<code>schemas.wview_extended.schema</code>, will work just fine.</p>
<p>To specify which schema to use when creating a database, modify option
<code>schema</code> in section <code>[DataBindings]</code> in
<code>weewx.conf</code>. For example, suppose you wanted to use the classic
(and smaller) schema <code>schemas.wview.schema</code> instead of the
default <code>schemas.wview_extended.schema</code>. Then the section
<code>[DataBindings]</code> would look like:</p>
<div class="highlight"><pre><span></span><code><span class="k">[DataBindings]</span>
<span class="w">    </span><span class="k">[[wx_binding]]</span>
<span class="w">        </span><span class="na">database</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">archive_sqlite</span>
<span class="w">        </span><span class="na">table_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">archive</span>
<span class="w">        </span><span class="na">manager</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">weewx.manager.DaySummaryManager</span>
<span class="hll"><span class="w">        </span><span class="na">schema</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">schemas.wview.schema</span>
</span></code></pre></div>
<p>Now, when you start WeeWX, it will use this new choice instead of the
default.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This only works when the database is <em>first created</em>. Thereafter,
WeeWX reads the schema directly from the database. Changing this option
will have no effect!</p>
</div>
<h3 id="modify-starting-schema">Modifying a starting schema<a class="headerlink" href="#modify-starting-schema" title="Permanent link">&para;</a></h3>
<p>If none of the three starting schemas that come with WeeWX suits your purposes,
you can easily create your own. Just pick one of the three schemas as a
starting point, then modify it. Put the results in the <code>user</code> subdirectory,
where it will be safe from upgrades. For example, suppose you like the
<code>schemas.wview_small</code> schema, but you need to store the type <code>electricity</code>
from the example
<a href="../service-engine/#add-data-source"><em>Adding a second data source</em></a>. The type
<code>electricity</code> does not appear in the schema, so you'll have to add it before
starting up WeeWX. We will call the resulting new schema
<code>user.myschema.schema</code>.</p>
<p>If you did a Debian install, here's how you would do this:</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="c1"># Copy the wview_small schema over to the user subdirectory and rename it myschema:</span>
sudo<span class="w"> </span>cp<span class="w"> </span>/usr/share/weewx/schemas/wview_small.py<span class="w"> </span>/usr/share/weewx/user/myschema.py

<span class="w"> </span><span class="c1"># Edit it using your favorite text editor</span>
sudo<span class="w"> </span>nano<span class="w"> </span>/usr/share/weewx/user/myschema.py
</code></pre></div>
<p>If you did a pip install, it can be difficult to find the starting schema
because it can be buried deep in the Python library tree. It's easier to
just download from the git repository and start with that:</p>
<div class="highlight"><pre><span></span><code><span class="w"> </span><span class="c1"># Download the wview_small schema and rename it to myschema.py</span>
<span class="nb">cd</span><span class="w"> </span>~/weewx-data/bin/user
wget<span class="w"> </span>https://raw.githubusercontent.com/weewx/weewx/master/bin/schemas/wview_small.py
mv<span class="w"> </span>wview_small.py<span class="w"> </span>myschema.py

<span class="w"> </span><span class="c1"># Edit it using your favorite text editor</span>
nano<span class="w"> </span>myschema.py
</code></pre></div>
<p>In <code>myschema.py</code> change this:</p>
<div class="highlight"><pre><span></span><code>         ...
         (&#39;windchill&#39;,            &#39;REAL&#39;),
         (&#39;windDir&#39;,              &#39;REAL&#39;),
         (&#39;windGust&#39;,             &#39;REAL&#39;),
         (&#39;windGustDir&#39;,          &#39;REAL&#39;),
         (&#39;windSpeed&#39;,            &#39;REAL&#39;),
         ]
</code></pre></div>
<p>to this</p>
<div class="highlight"><pre><span></span><code>         ...
         (&#39;windchill&#39;,            &#39;REAL&#39;),
         (&#39;windDir&#39;,              &#39;REAL&#39;),
         (&#39;windGust&#39;,             &#39;REAL&#39;),
         (&#39;windGustDir&#39;,          &#39;REAL&#39;),
         (&#39;windSpeed&#39;,            &#39;REAL&#39;),
<span class="hll">         (&#39;electricity&#39;,          &#39;REAL&#39;),
</span>         ]
</code></pre></div>
<p>The only change was the addition (<mark>highlighted</mark>) of <code>electricity</code> to the
list of observation names.</p>
<p>Now change option <code>schema</code> under <code>[DataBindings]</code> in <code>weewx.conf</code> to use
your new schema:</p>
<div class="highlight"><pre><span></span><code>[DataBindings]
    [[wx_binding]]
        database = archive_sqlite
        table_name = archive
        manager = weewx.manager.DaySummaryManager
<span class="hll">        schema = user.myschema.schema
</span></code></pre></div>
<p>Start WeeWX. When the new database is created, it will use your modified
schema instead of the default.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This will only work when the database is first created!
Thereafter, WeeWX reads the schema directly from the database and your
changes will have no effect!</p>
</div>
<h2 id="modify-the-schema-of-an-existing-database">Modify the schema of an existing database<a class="headerlink" href="#modify-the-schema-of-an-existing-database" title="Permanent link">&para;</a></h2>
<p>The previous section covers the case where you do not have an existing
database, so you modify a starting schema, then use it to initialize the
database. But, what if you already have a database, and you want to modify
its schema, perhaps by adding a column or two? Creating a new starting schema
is not going to work because it is only used when the database is first
created. Here is where the command
<a href="../../utilities/weectl-database"><code>weectl database</code></a> can be useful.</p>
<p>There are two ways to do this. Both are covered below.</p>
<ol>
<li>
<p>Modify the database <em>in situ</em>. This choice works best for small changes.</p>
</li>
<li>
<p>Reconfigure the old database to a new one while modifying it along the
    way, This choice is best for large modifications.</p>
</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Before using <code>weectl database</code>, MAKE A BACKUP FIRST!</p>
<p>Be sure to stop <code>weewxd</code> first.</p>
</div>
<h3 id="modify-the-database-in-situ">Modify the database <em>in situ</em><a class="headerlink" href="#modify-the-database-in-situ" title="Permanent link">&para;</a></h3>
<p>If you want to make some minor modifications to an existing database, perhaps
adding or removing a column, then this can easily be done using the command
<code>weectl database</code> with an appropriate action. We will cover the cases of
adding, removing, and renaming a type. See the documentation for <a href="../../utilities/weectl-database"><code>weectl
database</code></a> for more details.</p>
<h4 id="add-archive-type">Adding a type<a class="headerlink" href="#add-archive-type" title="Permanent link">&para;</a></h4>
<p>Suppose you have an existing database, to which you want to add a type, such as
the type <code>electricity</code> from the example <a href="../service-engine/#add-data-source"><em>Adding a second data
source</em></a>. This can be done in one easy
step using the action <code>weectl database add-column</code>:</p>
<div class="highlight"><pre><span></span><code>weectl<span class="w"> </span>database<span class="w"> </span>add-column<span class="w"> </span>electricity
</code></pre></div>
<p>The tool not only adds <code>electricity</code> to the main archive table, but also to the
daily summaries.</p>
<h4 id="remove-archive-type">Removing a type<a class="headerlink" href="#remove-archive-type" title="Permanent link">&para;</a></h4>
<p>In a similar manner, the tool can remove any unneeded types from an existing
database. For example, suppose you are using the <code>schemas.wview</code> schema, but
you're pretty sure you're not going to need to store soil moisture. You can
drop the unnecessary types this way:</p>
<div class="highlight"><pre><span></span><code>weectl<span class="w"> </span>database<span class="w"> </span>drop-columns<span class="w"> </span>soilMoist1<span class="w"> </span>soilMoist2<span class="w"> </span>soilMoist3<span class="w"> </span>soilMoist4<span class="w"> </span>
</code></pre></div>
<p>Unlike the action <code>add-column</code>, the action <code>drop-columns</code> can take more than
one type. This is done in the interest of efficiency: adding new columns is
easy and fast with the SQLite database, but dropping columns requires copying
the whole database. By specifying more than one type, you can amortize the
cost over a single invocation of the utility.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Dropping types from a database means <em>you will lose any data
associated with them!</em> The data cannot be recovered.</p>
</div>
<h4 id="rename-archive-type">Renaming a type<a class="headerlink" href="#rename-archive-type" title="Permanent link">&para;</a></h4>
<p>Suppose you just want to rename a type? This can be done using the action
<code>rename-column</code>. Here's an example where you rename <code>soilMoist1</code> to
<code>soilMoistGarden</code>:</p>
<div class="highlight"><pre><span></span><code>weectl<span class="w"> </span>database<span class="w"> </span>rename-column<span class="w"> </span>soilMoist1<span class="w"> </span>soilMoistGarden
</code></pre></div>
<p>Note how the action <code>rename-column</code> requires <em>two</em> positional arguments:
the column being renamed, and its final name.</p>
<h3 id="reconfigure-using-new-schema">Reconfigure database using a new schema<a class="headerlink" href="#reconfigure-using-new-schema" title="Permanent link">&para;</a></h3>
<p>If you are making major changes to your database, you may find it easier
to create a brand-new database using the schema you want, then transfer
all data from the old database into the new one. This approach is more
work, and takes more processing time than the <em>in situ</em> strategies
outlines above, but has the advantage that it leaves behind a record of
exactly the schema you are using.</p>
<p>Here is the general strategy to do this.</p>
<ol>
<li>
<p>Create a new schema that includes exactly the types that you want.</p>
</li>
<li>
<p>Specify this schema as the starting schema for the database.</p>
</li>
<li>
<p>Make sure you have the necessary permissions to create the new database.</p>
</li>
<li>
<p>Use the action
    <a href="../../utilities/weectl-database/#reconfigure-a-database"><code>weectl database reconfigure</code></a>
    to create the new database and populate it with data from the old
    database.</p>
</li>
<li>
<p>Shuffle databases around so WeeWX will use the new database.</p>
</li>
</ol>
<p>Here are the details:</p>
<ol>
<li>
<p><strong>Create a new schema.</strong> First step is to create a new schema with
    exactly the types you want. See the instructions above <a href="#modify-starting-schema"><em>Modify a
    starting schema</em></a>. As an example, suppose
    your new schema is called <code>user.myschema.schema</code>.</p>
</li>
<li>
<p><strong>Set as starting schema.</strong> Set your new schema as the starting
    schema with whatever database binding you are working with
    (generally, <code>wx_binding</code>). For example:</p>
<div class="highlight"><pre><span></span><code><span class="k">[DataBindings]</span>

<span class="w">    </span><span class="k">[[wx_binding]]</span>
<span class="w">        </span><span class="na">database</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">archive_sqlite</span>
<span class="w">        </span><span class="na">table_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">archive</span>
<span class="w">        </span><span class="na">manager</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">weewx.manager.DaySummaryManager</span>
<span class="hll"><span class="w">        </span><span class="na">schema</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">user.myschema.schema</span>
</span></code></pre></div>
</li>
<li>
<p><strong>Check permissions.</strong> The transfer action will create a new
    database with the same name as the old, except with the suffix <code>_new</code>
    attached to the end. Make sure you have the necessary permissions to do 
    this. In particular, if you are using MySQL, you will need <code>CREATE</code>
    privileges.</p>
</li>
<li>
<p><strong>Create and populate the new database.</strong> Use the command
    <code>weectl database</code> with the <code>reconfigure</code> action.</p>
<div class="highlight"><pre><span></span><code>weectl<span class="w"> </span>database<span class="w"> </span>reconfigure
</code></pre></div>
<p>This will create a new database (nominally, <code>weewx.sdb_new</code> if you are
using SQLite, <code>weewx_new</code> if you are using MySQL), using the schema found
in <code>user.myschema.schema</code>, and populate it with data from the old database.</p>
</li>
<li>
<p><strong>Shuffle the databases.</strong> Now arrange things so WeeWX can find the
    new database.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make a backup of the data before doing any of the next steps!</p>
</div>
<p>You can either shuffle the databases around so the new database has the
same name as the old database, or edit <code>weewx.conf</code> to use the new
database name.  To do the former:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">SQLite</label><label for="__tabbed_1_2">MySQL</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>~/weewx-data/archive
mv<span class="w"> </span>weewx.sdb_new<span class="w"> </span>weewx.sdb
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>mysql<span class="w"> </span>-u<span class="w"> </span>&lt;username&gt;<span class="w"> </span>--password<span class="o">=</span>&lt;mypassword&gt;
mysql&gt;<span class="w"> </span>DROP<span class="w"> </span>DATABASE<span class="w"> </span>weewx<span class="p">;</span><span class="w">                             </span><span class="c1"># Delete the old database</span>
mysql&gt;<span class="w"> </span>CREATE<span class="w"> </span>DATABASE<span class="w"> </span>weewx<span class="p">;</span><span class="w">                           </span><span class="c1"># Create a new one with the same name</span>
mysql&gt;<span class="w"> </span>RENAME<span class="w"> </span>TABLE<span class="w"> </span>weewx_new.archive<span class="w"> </span>TO<span class="w"> </span>weewx.archive<span class="p">;</span><span class="w"> </span><span class="c1"># Rename to the nominal name</span>
</code></pre></div>
</div>
</div>
</div>
</li>
<li>
<p>It's worth noting that there's actually a hidden, last step:
    rebuilding the daily summaries inside the new database. This will be
    done automatically by <code>weewxd</code> at the next startup. Alternatively, it
    can be done manually using the
    <a href="../../utilities/weectl-database/"><code>weectl database rebuild-daily</code></a> action:</p>
<div class="highlight"><pre><span></span><code>weectl<span class="w"> </span>database<span class="w"> </span>rebuild-daily
</code></pre></div>
</li>
</ol>
<h2 id="change-unit-system">Changing the unit system in an existing database<a class="headerlink" href="#change-unit-system" title="Permanent link">&para;</a></h2>
<p>Normally, data are stored in the databases using US Customary units, and you
shouldn't care; it is an "implementation detail". Data can always be displayed
using any set of units you want &mdash; the section <a href="../custom-reports/#changing-unit-systems"><em>Changing unit
systems</em></a> explains how to change
the reporting units. Nevertheless, there may be special situations where you
wish to store the data in Metric units. For example, you may need to allow
direct programmatic access to the database from another piece of software that
expects metric units.</p>
<p>You should not change the database unit system midstream. That is, do
not start with one unit system then, some time later, switch to another.
WeeWX cannot handle databases with mixed unit systems &mdash; see the
section <a href="../../reference/weewx-options/stdconvert"><code>[StdConvert]</code></a> in the
WeeWX User's Guide. However, you can reconfigure the database by
copying it to a new database, performing the unit conversion along the
way. You then use this new database.</p>
<p>The general strategy is identical to the strategy outlined above in the section
<a href="#reconfigure-using-new-schema"><em>Reconfigure database using new schema</em></a>. The
only difference is that instead of specifying a new starting schema, you specify
a different database unit system. This means that instead of steps 1 and 2
above, you edit the configuration file and change option <code>target_unit</code> in
section <a href="../../reference/weewx-options/stdconvert"><code>[StdConvert]</code></a> to reflect
your choice. For example, if you are switching to metric units, the option will
look like:</p>
<div class="highlight"><pre><span></span><code><span class="k">[StdConvert]</span>
<span class="w">    </span><span class="na">target_unit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">METRICWX</span>
</code></pre></div>
<p>After changing <code>target_unit</code>, you then go ahead with the rest of the steps.
That is run the action <code>weectl database reconfigure</code>, then shuffle the
databases.</p>
<h2 id="rebuilding-the-daily-summaries">Rebuilding the daily summaries<a class="headerlink" href="#rebuilding-the-daily-summaries" title="Permanent link">&para;</a></h2>
<p>The <code>weectl database</code> command can also be used to rebuild the daily
summaries:</p>
<div class="highlight"><pre><span></span><code>weectl<span class="w"> </span>database<span class="w"> </span>rebuild-daily
</code></pre></div>
<p>In most cases this will be sufficient; however, if anomalies remain in the
daily summaries the daily summary tables may be dropped first before
rebuilding:</p>
<div class="highlight"><pre><span></span><code>weectl<span class="w"> </span>database<span class="w"> </span>drop-daily
</code></pre></div>
<p>Then try again with <code>weectl database rebuild-daily</code>.</p>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright  2009-2023 Thomas Keffer, Matthew Wall, and Gary Roderick, all rights reserved
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.indexes", "navigation.top", "toc.follow", "search.highlight", "search.share", "search.suggest", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.b4d07000.min.js"></script>
      
    
  </body>
</html>